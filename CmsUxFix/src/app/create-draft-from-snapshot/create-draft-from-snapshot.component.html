<div fxLayout="column">
  <mat-toolbar color="primary">
    <h3 fxFlex>Create Draft </h3>
    <button mat-button mat-dialog-close>
      <i class="mdi mdi-close mdi-24px"></i>
    </button>
  </mat-toolbar>
  <mat-dialog-content mat-dialog-content fxLayout="column" fxLayoutAlign="start stretch" fxFlexFill>
    <form fxLayout="column" fxLayoutAlign="start stretch" [formGroup]="draftForm">
      <mat-form-field fxFlexFill fxFlexOffset="10px">
        <input matInput placeholder="Draft Name" [formControl]="draftName" (blur)="checkDuplicateName()" (keyup)="checkDuplicateName()">
        <small matSuffix>{{draftName.value?.length || 0}}/100</small>
        <mat-error *ngIf="draftName.hasError('required')">Draft Name is required</mat-error>
        <mat-error *ngIf="draftName.hasError('minlength')">Please enter at least 5 characters.</mat-error>
        <mat-error *ngIf="draftName.hasError('maxlength')">Please enter maximum of 100 characters</mat-error>
        <mat-error *ngIf="draftName.hasError('whitespace')">Leading and trailing white spaces not allowed</mat-error>

      </mat-form-field>
      <mat-error *ngIf="!isValidDraftName">Duplicate Draft Name </mat-error>
    </form>
    <mat-error [fxHide]="data.content && data.content.length>0 && data.isMergedDraft">
      You can't create a blank draft.
    </mat-error>
  </mat-dialog-content>
  <mat-dialog-actions fxFlexFill fxLayoutAlign="end center">
    <div fxLayout="row" fxFlex fxLayoutAlign="end center">
      <button *ngIf="!data.isMergedDraft" [fxHide]="!isOperationAllowed([cmsOperations.CreateDraftWithSnapshot])" mat-raised-button
        color="primary" [disabled]="!isValidDraftName || !draftForm.valid" (click)="createDraftFromSnapshot();">
        Create Draft
      </button>

      <button *ngIf="data.isMergedDraft" [fxHide]="!isOperationAllowed([cmsOperations.CreateDraftWithSnapshot])" mat-raised-button
        color="primary" [disabled]="!(data.content && data.content.length>0) || (!isValidDraftName || !draftForm.valid)" (click)="createDraftUsingMergeContent();">
        Create Draft
      </button>
    </div>
  </mat-dialog-actions>
</div>